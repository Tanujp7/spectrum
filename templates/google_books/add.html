{% extends "google_books/base.html" %}

{% block page_title %}Add Book{% endblock page_title %}
{% block sub_navigation_title %}Add Book{% endblock sub_navigation_title %}

{% block body %}

{% if item %}
  <div class="query row">
    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 my-3">
      <div class="card">
        <img class="card-img-top" width="100%" src="{{ item.thumbnail|default:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg" }}">
        <div class="card-block">
          <h4 class="card-title">{{item.title}}</h4>
          <h6 class="card-subtitle mb-2">
            {% if item.isbn %}
              {% for a in item.authors %}
                <span>{{ a }},</span>
              {% endfor %}
            {% else %}
                <span>unknown</span>
            {% endif %}
          </h6>
          {% with item.alt_description as alt_desc %}
          <p class="card-text">{{ item.description|default:alt_desc|default:" " }}</p>
          {% endwith %}
        </div>
        <ul class="list-group list-group-flush">
          {% if item.publisher %}
            <li class="list-group-item">Publisher : {{ item.publisher|default:" - " }}</li>
          {% endif %}
          {% if item.published_date %}
            <li class="list-group-item">Publication Date : {{ item.published_date|default:" - " }}</li>
          {% endif %}
          {% if item.isbn %}
            <li class="list-group-item">
            {% for id in item.isbn %}
              <p style="clear:both">{{ id.type }} - {{ id.identifier }}</p>
            {% endfor %}
            </li>
          {% endif %}
          {% if item.category %}
            <li class="list-group-item">Categories : {{ item.category|default:" - " }}</li>
          {% endif %}
          {% if item.tags %}
            <li class="list-group-item">
              Tags :
            {% for tag in item.tags %}
              <span>{{ tag }},</span>
            {% endfor %}
            </li>
          {% endif %}
        </ul>
        <div class="card-block text-center">
          <div class="btn-group" role="group">
            <a href="/google_books/add/?volume_id={{ item.id|default:"" }}" class="btn btn-primary" role="button">Add to database</a>
            <a href="{{ item.link|default:"http://google.com/" }}" class="btn btn-secondary" role="button">Link</a>
          </div>
        </div>
        <div class="card-footer text-muted">
          {% if item.page_count %}Pgs. {{ item.page_count|default:"-" }}{% endif %}
          {% if item.avg_rating %}| Rating : {{ item.avg_rating|default:"-" }} ({{ item.ratings_count|default:"-" }} counts){% endif %}
          {% if item.language %}| {{ item.language }}{% endif %}
          {% if item.sale_amount %}| {{ item.sale_amount.currencyCode }} {{ item.sale_amount.amount }}{% endif %}
        </div>
      </div>
    </div>
    <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12 my-3">
      <form method="POST" class="form-horizontal">

        <div class="form-group">
          <label for="volume_id" class="form-control-label">Volume ID</label>
          <input class="form-control" name="volume_id" id="volume_id" type="text" value="{{item.volume_id}}"/>
        </div>
        <div class="form-group">
          <label for="title" class="form-control-label">Title</label>
          <input class="form-control" name="title" id="title" type="text" value="{{item.title}}" />
        </div>
        <div class="form-group">
          <label for="isbn" class="form-control-label">ISBN</label>
          <input class="form-control" name="isbn" id="isbn" type="text" value="{{item.isbn}}" />
        </div>
        <div class="form-group">
          <label for="description" class="form-control-label">Description</label>
          <textarea class="form-control" name="description" id="description">{{item.description}}</textarea>
        </div>
        <div class="form-group">
          <label for="publication_date" class="form-control-label">Publication Date</label>
          <input class="form-control" name="publication_date" id="publication_date" type="date" value="{{item.publication_date}}" />
        </div>
        <div class="form-group">
          <label for="tags" class="form-control-label">Tags</label>
          <input class="form-control" name="tags" id="tags" type="text" value="{{item.tags}}" />
        </div>
        <div class="form-group">
          <label for="page_count" class="form-control-label">Page Count</label>
          <input class="form-control" name="page_count" id="page_count" type="number" value="{{item.page_count}}" />
        </div>
        <div class="form-group">
          <label for="rating" class="form-control-label">Rating</label>
          <input class="form-control" name="rating" id="rating" type="number" value="{{item.rating}}" />
        </div>
        <div class="form-group">
          <label for="rating_count" class="form-control-label">Rating Count</label>
          <input class="form-control" name="rating_count" id="rating_count" type="number" value="{{item.rating_count}}" />
        </div>
        <div class="form-group">
          <label for="language" class="form-control-label">Language</label>
          <input class="form-control" name="language" id="language" type="text" value="{{item.language}}" />
        </div>
        <div class="form-group">
          <label for="cost" class="form-control-label">Cost</label>
          <input class="form-control" name="cost" id="cost" type="text" value="{{item.cost}}" />
        </div>

        <button type="submit" class="save btn btn-default">Save</button>
      </form>
    </div>
  </div>
{% endif %}

{% endblock body %}

{% block page_scripts %}{% endblock page_scripts %}
